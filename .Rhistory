df$lon <- rpoints[,"X"]
df$lat <- rpoints[,"Y"]
}
country
country <- world[world$name_long == df$Location[i], 0]
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = TRUE))
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = FALSE))
rpoints
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = FALSE))
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = FALSE))
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = FALSE))
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = FALSE))
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = FALSE))
rpoints <- st_coordinates(st_sample(country, size = 1, type = "regular", exact = FALSE))
rpoints
rpoints <- st_coordinates(st_sample(country, size = 1, type = "regular", exact = TRUE))
rpoints
rpoints <- st_coordinates(st_sample(country, size = 1, type = "hexagonal", exact = TRUE))
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = TRUE))
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = FALSE))
rpoints <- st_coordinates(st_sample(country, size = 10, type = "random", exact = FALSE))
rpoints <- st_coordinates(st_sample(country, size = 10, type = "random", exact = TRUE))
rpoints <- st_coordinates(st_sample(country, size = 10, type = "random", exact = TRUE, by_polygon = FALSE))
rpoints <- st_coordinates(st_sample(country, size = 10, type = "regular", exact = TRUE, by_polygon = FALSE))
st_sample(country, size = 10, type = "regular", exact = TRUE, by_polygon = FALSE)
st_sample(country, size = 10, type = "random", exact = TRUE, by_polygon = FALSE)
i <- 28
country <- world[world$name_long == df$Location[i], 0]
country
st_sample(country, size = 10, type = "regular", exact = TRUE, by_polygon = FALSE)
i <- 28
country <- world[world$name_long == df$Location[i], 0]
st_sample(country, size = 10, type = "regular", exact = TRUE, by_polygon = FALSE)
i <- 29
country <- world[world$name_long == df$Location[i], 0]
st_sample(country, size = 10, type = "regular", exact = TRUE, by_polygon = FALSE)
st_sample(country, size = 10, type = "regular", exact = TRUE, by_polygon = TRUE)
#random assignment
library(sf)
library(spData)
library(dplyr)
data <- read.csv("./data/Cleaned_Veizer_15_02_2021.csv")
df <- subset(data, comments == "Random assignment")
df <- df[,c("literature", "Location")]
df <- unique(df)
df$lon <- NA
df$lat <- NA
for(i in 1:nrow(df)){
country <- world[world$name_long == df$Location[i], 0]
rpoints <- st_coordinates(st_sample(country, size = 10, type = "regular", exact = TRUE, by_polygon = TRUE))
df$lon <- rpoints[,"X"]
df$lat <- rpoints[,"Y"]
}
country
data <- read.csv("./data/Cleaned_Veizer_15_02_2021.csv")
df <- subset(data, comments == "Random assignment")
df <- df[,c("literature", "Location")]
df <- unique(df)
df$lon <- NA
df$lat <- NA
for(i in 1:nrow(df)){
country <- world[world$name_long == df$Location[i], 0]
rpoints <- st_coordinates(st_sample(country, size = 1, type = "regular", exact = TRUE, by_polygon = TRUE))
df$lon <- rpoints[,"X"]
df$lat <- rpoints[,"Y"]
}
rpoints
rpoints <- st_coordinates(st_sample(country, size = 1, type = "regular", by_polygon = TRUE))
rpoints
data <- read.csv("./data/Cleaned_Veizer_15_02_2021.csv")
df <- subset(data, comments == "Random assignment")
df <- df[,c("literature", "Location")]
df <- unique(df)
df$lon <- NA
df$lat <- NA
for(i in 1:nrow(df)){
country <- world[world$name_long == df$Location[i], 0]
rpoints <- st_coordinates(st_sample(country, size = 1, type = "regular", by_polygon = TRUE))
df$lon <- rpoints[,"X"]
df$lat <- rpoints[,"Y"]
}
rpoints
st_sample(country, size = 1, type = "regular", by_polygon = TRUE)
st_sample(country, size = 1, type = "regular", by_polygon = TRUE)
st_sample(country, size = 1, type = "regular", by_polygon = TRUE)
st_sample(country, size = 1, type = "regular", by_polygon = TRUE)
st_sample(country, size = 1, type = "regular", by_polygon = TRUE)
st_sample(country, size = 1, type = "regular", by_polygon = TRUE)
st_sample(country, size = 1, type = "regular", by_polygon = TRUE)
st_sample(country, size = 1, type = "regular", by_polygon = TRUE)
st_sample(country, size = 1, type = "regular", exact = TRUE, by_polygon = TRUE)
st_sample(country, size = 1, type = "regular", exact = TRUE, by_polygon = TRUE)
st_sample(country, size = 1, type = "regular", exact = TRUE, by_polygon = TRUE)
st_sample(country, size = 1, type = "regular", exact = TRUE, by_polygon = TRUE)
st_sample(country, size = 1, type = "regular", exact = TRUE, by_polygon = TRUE)
st_sample(country, size = 1, type = "regular", exact = TRUE, by_polygon = TRUE)
st_sample(country, size = 1, type = "regular", exact = TRUE, by_polygon = TRUE)
st_sample(country, size = 1, type = "regular", exact = TRUE, by_polygon = TRUE)
st_sample(country, size = 1, type = "regular", exact = TRUE, by_polygon = TRUE)
st_sample(country, size = 1, type = "regular", exact = TRUE, by_polygon = TRUE)
st_sample(country, size = 1, type = "regular", exact = TRUE, by_polygon = TRUE)
st_sample(country, size = 1, type = "regular", exact = TRUE, by_polygon = TRUE)
st_sample(country, size = 1, type = "regular", exact = TRUE, by_polygon = TRUE)
st_sample(country, size = 1, type = "regular", exact = TRUE, by_polygon = TRUE)
st_sample(country, size = 1, type = "regular", exact = TRUE, by_polygon = TRUE)
st_sample(country, size = 1, type = "regular", exact = TRUE, by_polygon = TRUE)
st_sample(country, size = 1, type = "regular", exact = TRUE, by_polygon = TRUE)
st_sample(country, size = 1, type = "regular", exact = TRUE, by_polygon = TRUE)
st_sample(country, size = 1, type = "regular", exact = TRUE, by_polygon = TRUE)
st_sample(country, size = 1, type = "regular", exact = TRUE, by_polygon = TRUE)
?while
?while()
nrow(rpoints)
country <- world[world$name_long == df$Location[i], 0]
while(nrow(rpoints == 0)){rpoints <- st_coordinates(st_sample(country, size = 1, type = "regular", exact = TRUE, by_polygon = TRUE))}
nrow(rpoints == 0)
country <- world[world$name_long == df$Location[i], 0]
while(nrow(rpoints == 0)){rpoints <- st_coordinates(st_sample(country, size = 1, type = "regular", exact = TRUE, by_polygon = TRUE))}
rpoints <- st_coordinates(st_sample(country, size = 1, type = "regular", exact = TRUE, by_polygon = TRUE))
rpoints
spsample(country, size = 1, type = "random", exact = TRUE, by_polygon = TRUE)
library(sp)
spsample(country, size = 1, type = "random", exact = TRUE, by_polygon = TRUE)
spsample(country, size = 1, type = "random")
?st_sample
country <- world[world$name_long == df$Location[i], 0]
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = TRUE, by_polygon = TRUE))
rpoints
#random assignment
library(sf)
library(spData)
library(dplyr)
data <- read.csv("./data/Cleaned_Veizer_15_02_2021.csv")
df <- subset(data, comments == "Random assignment")
df <- df[,c("literature", "Location")]
df <- unique(df)
df$lon <- NA
df$lat <- NA
for(i in 1:nrow(df)){
country <- world[world$name_long == df$Location[i], 0]
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = TRUE, by_polygon = TRUE))
df$lon <- rpoints[,"X"]
df$lat <- rpoints[,"Y"]
}
df$Location[i]
country <- world[world$name_long == df$Location[i], 0]
country
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = TRUE, by_polygon = TRUE))
df$lon <- rpoints[,"X"]
df$lat <- rpoints[,"Y"]
#random assignment
library(sf)
library(spData)
library(dplyr)
data <- read.csv("./data/Cleaned_Veizer_15_02_2021.csv")
df <- subset(data, comments == "Random assignment")
df <- df[,c("literature", "Location")]
df <- unique(df)
df$lon <- NA
df$lat <- NA
for(i in 1:nrow(df)){
country <- world[world$name_long == df$Location[i], 0]
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = TRUE, by_polygon = TRUE))
df$lon <- rpoints[,"X"]
df$lat <- rpoints[,"Y"]
}
i
country
rpoints
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = TRUE, by_polygon = TRUE))
#random assignment
library(sf)
library(spData)
library(dplyr)
data <- read.csv("./data/Cleaned_Veizer_15_02_2021.csv")
df <- subset(data, comments == "Random assignment")
df <- df[,c("literature", "Location")]
df <- unique(df)
df$lon <- NA
df$lat <- NA
for(i in 1:nrow(df)){
country <- world[world$name_long == df$Location[i], 0]
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = TRUE, by_polygon = TRUE))
df$lon <- rpoints[,"X"]
df$lat <- rpoints[,"Y"]
}
#random assignment
library(sf)
library(spData)
library(dplyr)
data <- read.csv("./data/Cleaned_Veizer_15_02_2021.csv")
df <- subset(data, comments == "Random assignment")
df <- df[,c("literature", "Location")]
df <- unique(df)
df$lon <- NA
df$lat <- NA
for(i in 1:nrow(df)){
country <- world[world$name_long == df$Location[i], 0]
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = TRUE, by_polygon = TRUE))
df$lon <- rpoints[,"X"]
df$lat <- rpoints[,"Y"]
}
#random assignment
library(sf)
library(spData)
library(dplyr)
data <- read.csv("./data/Cleaned_Veizer_15_02_2021.csv")
df <- subset(data, comments == "Random assignment")
df <- df[,c("literature", "Location")]
df <- unique(df)
df$lon <- NA
df$lat <- NA
for(i in 1:nrow(df)){
country <- world[world$name_long == df$Location[i], 0]
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = TRUE, by_polygon = TRUE))
df$lon <- rpoints[,"X"]
df$lat <- rpoints[,"Y"]
}
df
#random assignment
library(sf)
library(spData)
library(dplyr)
data <- read.csv("./data/Cleaned_Veizer_15_02_2021.csv")
df <- subset(data, comments == "Random assignment")
df <- df[,c("literature", "Location")]
df <- unique(df)
df$lon <- NA
df$lat <- NA
for(i in 1:nrow(df)){
country <- world[world$name_long == df$Location[i], 0]
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = TRUE, by_polygon = TRUE))
df$lon[i] <- rpoints[,"X"]
df$lat[i] <- rpoints[,"Y"]
}
#random assignment
library(sf)
library(spData)
library(dplyr)
data <- read.csv("./data/Cleaned_Veizer_15_02_2021.csv")
df <- subset(data, comments == "Random assignment")
df <- df[,c("literature", "Location")]
df <- unique(df)
df$lon <- NA
df$lat <- NA
for(i in 1:nrow(df)){
country <- world[world$name_long == df$Location[i], 0]
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = TRUE, by_polygon = TRUE))
df$lon[i] <- rpoints[,"X"]
df$lat[i] <- rpoints[,"Y"]
}
#random assignment
library(sf)
library(spData)
library(dplyr)
data <- read.csv("./data/Cleaned_Veizer_15_02_2021.csv")
df <- subset(data, comments == "Random assignment")
df <- df[,c("literature", "Location")]
df <- unique(df)
df$lon <- NA
df$lat <- NA
for(i in 1:nrow(df)){
country <- world[world$name_long == df$Location[i], 0]
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = TRUE, by_polygon = TRUE))
df$lon[i] <- rpoints[,"X"]
df$lat[i] <- rpoints[,"Y"]
}
#random assignment
library(sf)
library(spData)
library(dplyr)
data <- read.csv("./data/Cleaned_Veizer_15_02_2021.csv")
df <- subset(data, comments == "Random assignment")
df <- df[,c("literature", "Location")]
df <- unique(df)
df$lon <- NA
df$lat <- NA
for(i in 1:nrow(df)){
country <- world[world$name_long == df$Location[i], 0]
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = TRUE, by_polygon = TRUE))
df$lon[i] <- rpoints[,"X"]
df$lat[i] <- rpoints[,"Y"]
}
df$lon[i
df$lon[i]
rpoints[,"X"]
#random assignment
library(sf)
library(spData)
library(dplyr)
data <- read.csv("./data/Cleaned_Veizer_15_02_2021.csv")
df <- subset(data, comments == "Random assignment")
df <- df[,c("literature", "Location")]
df <- unique(df)
df$lon <- NA
df$lat <- NA
for(i in 1:nrow(df)){
country <- world[world$name_long == df$Location[i], 0]
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = TRUE, by_polygon = TRUE))
df$lon[i] <- as.numneric(rpoints[,"X"])
df$lat[i] <- as.numeric(rpoints[,"Y"])
}
#random assignment
library(sf)
library(spData)
library(dplyr)
data <- read.csv("./data/Cleaned_Veizer_15_02_2021.csv")
df <- subset(data, comments == "Random assignment")
df <- df[,c("literature", "Location")]
df <- unique(df)
df$lon <- NA
df$lat <- NA
for(i in 1:nrow(df)){
country <- world[world$name_long == df$Location[i], 0]
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = TRUE, by_polygon = TRUE))
df$lon[i] <- as.numneic(rpoints[,"X"])
df$lat[i] <- as.numeric(rpoints[,"Y"])
}
#random assignment
library(sf)
library(spData)
library(dplyr)
data <- read.csv("./data/Cleaned_Veizer_15_02_2021.csv")
df <- subset(data, comments == "Random assignment")
df <- df[,c("literature", "Location")]
df <- unique(df)
df$lon <- NA
df$lat <- NA
for(i in 1:nrow(df)){
country <- world[world$name_long == df$Location[i], 0]
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = TRUE, by_polygon = TRUE))
df$lon[i] <- as.numeric(rpoints[,"X"])
df$lat[i] <- as.numeric(rpoints[,"Y"])
}
as.numeric(rpoints[,"X"])
#random assignment
library(sf)
library(spData)
library(dplyr)
data <- read.csv("./data/Cleaned_Veizer_15_02_2021.csv")
df <- subset(data, comments == "Random assignment")
df <- df[,c("literature", "Location")]
df <- unique(df)
df$lon <- NA
df$lat <- NA
for(i in 1:nrow(df)){
country <- world[world$name_long == df$Location[i], 0]
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = TRUE, by_polygon = TRUE))
df$lon[i] <- rpoints[1,"X"]
df$lat[i] <- rpoints[1,"Y"]
}
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = TRUE, by_polygon = TRUE))
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = TRUE, by_polygon = TRUE))
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = TRUE, by_polygon = TRUE))
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = TRUE, by_polygon = TRUE))
rpoints[1,"X"]
#random assignment
library(sf)
library(spData)
library(dplyr)
data <- read.csv("./data/Cleaned_Veizer_15_02_2021.csv")
df <- subset(data, comments == "Random assignment")
df <- df[,c("literature", "Location")]
df <- unique(df)
df$lon <- NA
df$lat <- NA
for(i in 1:nrow(df)){
country <- world[world$name_long == df$Location[i], 0]
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = TRUE, by_polygon = TRUE))
df$lon[i] <- as.numeric(rpoints[1,"X"])
df$lat[i] <- as.numeric(rpoints[1,"Y"])
}
#random assignment
library(sf)
library(spData)
library(dplyr)
data <- read.csv("./data/Cleaned_Veizer_15_02_2021.csv")
df <- subset(data, comments == "Random assignment")
df <- df[,c("literature", "Location")]
df <- unique(df)
df$lon <- NA
df$lat <- NA
for(i in 1:nrow(df)){
country <- world[world$name_long == df$Location[i], 0]
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = TRUE, by_polygon = TRUE))
df$lon[i] <- as.numeric(rpoints[1,"X"])
df$lat[i] <- as.numeric(rpoints[1,"Y"])
}
as.numeric(rpoints[1,"X"])
as.numeric(rpoints[1,"Y"])
country
country <- world[world$name_long == df$Location[i], 0]
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = TRUE, by_polygon = TRUE))
df$lon[i] <- as.numeric(rpoints[1,"X"])
df$lat[i] <- as.numeric(rpoints[1,"Y"])
#random assignment
library(sf)
library(spData)
library(dplyr)
data <- read.csv("./data/Cleaned_Veizer_15_02_2021.csv")
df <- subset(data, comments == "Random assignment")
df <- df[,c("literature", "Location")]
df <- unique(df)
df$lon <- NA
df$lat <- NA
for(i in 1:nrow(df)){
country <- world[world$name_long == df$Location[i], 0]
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = TRUE, by_polygon = TRUE))
df$lon[i] <- as.numeric(rpoints[1,"X"])
df$lat[i] <- as.numeric(rpoints[1,"Y"])
}
#random assignment
library(sf)
library(spData)
library(dplyr)
data <- read.csv("./data/Cleaned_Veizer_15_02_2021.csv")
df <- subset(data, comments == "Random assignment")
df <- df[,c("literature", "Location")]
df <- unique(df)
df$lon <- NA
df$lat <- NA
for(i in 1:nrow(df)){
country <- world[world$name_long == df$Location[i], 0]
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = TRUE, by_polygon = TRUE))
df$lon[i] <- as.numeric(rpoints[1,"X"])
df$lat[i] <- as.numeric(rpoints[1,"Y"])
}
#random assignment
library(sf)
library(spData)
library(dplyr)
data <- read.csv("./data/Cleaned_Veizer_15_02_2021.csv")
df <- subset(data, comments == "Random assignment")
df <- df[,c("literature", "Location")]
df <- unique(df)
df$lon <- NA
df$lat <- NA
for(i in 1:nrow(df)){
country <- world[world$name_long == df$Location[i], 0]
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = TRUE, by_polygon = TRUE))
df$lon[i] <- as.numeric(rpoints[1,"X"])
df$lat[i] <- as.numeric(rpoints[1,"Y"])
}
df
?left_join
left_join(x = data, y = df, by = c("Location" == "Location", "literature" == "literature"))
left_join(x = data, y = df, by = list("Location" == "Location", "literature" == "literature"))
list("Location" == "Location", "literature" == "literature")
left_join(x = data, y = df, by = c("Location" = "Location", "literature" = "literature"))
left_join(x = data, y = df, by = c("Location" = "Location", "literature" = "literature"), copy = TRUE)
left_join(x = data, y = df, by = c("Location" = "Location", "literature" = "literature"), keep = FALSE)
test <- left_join(x = data, y = df, by = c("Location" = "Location", "literature" = "literature"), copy = TRUE, keep = FALSE)
View(test)
View(data)
?replace
dplyr::recode()
?recode
i <- 1
which(data$literature == df$literature[i] & data$Location == df$Location[i])
df[i, c("lon","lat")]
data[vec,c("lon", "lat")]
vec <- which(data$literature == df$literature[i] & data$Location == df$Location[i])
data[vec,c("lon", "lat")]
for(i in 1:nrow(df)){
vec <- which(data$literature == df$literature[i] & data$Location == df$Location[i])
data[vec,c("lon", "lat")] <- df[i, c("lon","lat")]
}
#random assignment
library(sf)
library(spData)
library(dplyr)
data <- read.csv("./data/Cleaned_Veizer_15_02_2021.csv")
df <- subset(data, comments == "Random assignment")
df <- df[,c("literature", "Location")]
df <- unique(df)
df$lon <- NA
df$lat <- NA
for(i in 1:nrow(df)){
country <- world[world$name_long == df$Location[i], 0]
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = TRUE, by_polygon = TRUE))
df$lon[i] <- as.numeric(rpoints[1,"X"])
df$lat[i] <- as.numeric(rpoints[1,"Y"])
}
for(i in 1:nrow(df)){
vec <- which(data$literature == df$literature[i] & data$Location == df$Location[i])
data[vec,c("lon", "lat")] <- df[i, c("lon","lat")]
}
#random assignment
library(sf)
library(spData)
library(dplyr)
data <- read.csv("./data/Cleaned_Veizer_15_02_2021.csv")
df <- subset(data, comments == "Random assignment")
df <- df[,c("literature", "Location")]
df <- unique(df)
df$lon <- NA
df$lat <- NA
for(i in 1:nrow(df)){
country <- world[world$name_long == df$Location[i], 0]
rpoints <- st_coordinates(st_sample(country, size = 1, type = "random", exact = TRUE, by_polygon = TRUE))
df$lon[i] <- as.numeric(rpoints[1,"X"])
df$lat[i] <- as.numeric(rpoints[1,"Y"])
}
for(i in 1:nrow(df)){
vec <- which(data$literature == df$literature[i] & data$Location == df$Location[i])
data[vec,c("lon", "lat")] <- df[i, c("lon","lat")]
}
beepr::beep(2)
write.csv(data, "./data/Cleaned_Veizer_19_02_2021.csv")
beepr::beep(2)
data <- subset(data, comments == "Random assignment")
View(data)
